{"version":3,"names":["parseIOSDevicesList","text","devices","split","forEach","line","device","match","name","version","udid","isSimulator","metadata","type","push"],"sources":["../../../src/commands/runIOS/parseIOSDevicesList.ts"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport {Device} from '../../types';\n\n/**\n * Parses the output of the `xcrun instruments -s` command and returns metadata\n * about available iOS simulators and physical devices, as well as host Mac for\n * Catalyst purposes.\n *\n * Expected text looks roughly like this:\n *\n * ```\n * Known Devices:\n * this-mac-device [UDID]\n * A Physical Device (OS Version) [UDID]\n * A Simulator Device (OS Version) [UDID] (Simulator)\n * ```\n */\nfunction parseIOSDevicesList(text: string): Array<Device> {\n  const devices: Array<Device> = [];\n\n  text.split('\\n').forEach((line) => {\n    const device = line.match(\n      /(.*?) (\\(([0-9.]+)\\) )?\\[([0-9A-F-]+)\\]( \\(Simulator\\))?/i,\n    );\n    if (device) {\n      const [, name, , version, udid, isSimulator] = device;\n      const metadata: Device = {name, udid};\n      if (version) {\n        metadata.version = version;\n        metadata.type = isSimulator ? 'simulator' : 'device';\n      } else {\n        metadata.type = 'catalyst';\n      }\n      devices.push(metadata);\n    }\n  });\n\n  return devices;\n}\n\nexport default parseIOSDevicesList;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,mBAAmB,CAACC,IAAY,EAAiB;EACxD,MAAMC,OAAsB,GAAG,EAAE;EAEjCD,IAAI,CAACE,KAAK,CAAC,IAAI,CAAC,CAACC,OAAO,CAAEC,IAAI,IAAK;IACjC,MAAMC,MAAM,GAAGD,IAAI,CAACE,KAAK,CACvB,2DAA2D,CAC5D;IACD,IAAID,MAAM,EAAE;MACV,MAAM,GAAGE,IAAI,GAAIC,OAAO,EAAEC,IAAI,EAAEC,WAAW,CAAC,GAAGL,MAAM;MACrD,MAAMM,QAAgB,GAAG;QAACJ,IAAI;QAAEE;MAAI,CAAC;MACrC,IAAID,OAAO,EAAE;QACXG,QAAQ,CAACH,OAAO,GAAGA,OAAO;QAC1BG,QAAQ,CAACC,IAAI,GAAGF,WAAW,GAAG,WAAW,GAAG,QAAQ;MACtD,CAAC,MAAM;QACLC,QAAQ,CAACC,IAAI,GAAG,UAAU;MAC5B;MACAX,OAAO,CAACY,IAAI,CAACF,QAAQ,CAAC;IACxB;EACF,CAAC,CAAC;EAEF,OAAOV,OAAO;AAChB;AAAC,eAEcF,mBAAmB;AAAA"}